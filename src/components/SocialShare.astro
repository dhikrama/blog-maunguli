---
// src/components/SocialShare.astro
interface Props {
  title: string;
}
const { title } = Astro.props;
const currentUrl = Astro.url.href;

// Kumpulan link berbagi yang sudah benar
const shareLinks = {
  facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`,
  twitter: `https://twitter.com/intent/tweet?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(title)}`,
  linkedin: `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(currentUrl)}&title=${encodeURIComponent(title)}`,
  telegram: `https://t.me/share/url?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(title)}`,
  whatsapp: `https://api.whatsapp.com/send?text=${encodeURIComponent(title + " " + currentUrl)}`
}
---
<div class="flex items-center gap-4 flex-wrap">
  <p class="font-semibold text-foreground">Bagikan:</p>
  <div class="flex items-center gap-2">
    <a href={shareLinks.facebook} target="_blank" rel="noopener noreferrer" class="p-2 rounded-full bg-foreground/10 hover:bg-foreground/20 text-foreground transition-colors" aria-label="Bagikan ke Facebook">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3l-.5 3h-2.5v6.8c4.56-.93 8-4.96 8-9.8z"></path></svg>
    </a>
    <a href={shareLinks.twitter} target="_blank" rel="noopener noreferrer" class="p-2 rounded-full bg-foreground/10 hover:bg-foreground/20 text-foreground transition-colors" aria-label="Bagikan ke Twitter">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.67.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.27 0 .34.04.67.11.98-3.56-.18-6.73-1.89-8.84-4.48-.37.63-.58 1.37-.58 2.15 0 1.48.75 2.79 1.91 3.56-.71 0-1.37-.22-1.95-.5v.03c0 2.07 1.48 3.8 3.44 4.2-.36.1-.74.15-1.14.15-.28 0-.55-.03-.81-.08.55 1.7 2.13 2.94 4.01 2.97-1.47 1.15-3.32 1.83-5.33 1.83-.35 0-.69-.02-1.03-.06 1.9 1.23 4.16 1.95 6.58 1.95 7.89 0 12.21-6.54 12.21-12.21 0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg>
    </a>
    <a href={shareLinks.linkedin} target="_blank" rel="noopener noreferrer" class="p-2 rounded-full bg-foreground/10 hover:bg-foreground/20 text-foreground transition-colors" aria-label="Bagikan ke LinkedIn">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-11 4H5v10h3V7m-1.5-2A1.5 1.5 0 0 0 5 6.5a1.5 1.5 0 0 0 1.5 1.5A1.5 1.5 0 0 0 8 6.5A1.5 1.5 0 0 0 6.5 5M19 7h-3c-2.21 0-4 1.79-4 4v6h3v-5a1 1 0 0 1 1-1h1v6h3V11c0-2.21-1.79-4-4-4Z"></path></svg>
    </a>
    <a href={shareLinks.whatsapp} target="_blank" rel="noopener noreferrer" class="p-2 rounded-full bg-foreground/10 hover:bg-foreground/20 text-foreground transition-colors" aria-label="Bagikan ke WhatsApp">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M16.75 13.96c.25.13.41.2.46.3.08.11.1.78-.23 1.54-.3.71-1.22 1.43-2.23 1.58-.93.14-2.09-.16-3.29-.83-1.44-.8-2.6-1.92-3.52-3.37-.99-1.52-1.24-2.83-1.1-3.95.12-.99.63-1.74 1.34-2.25.53-.38 1.1-.5 1.54-.5.1.01.2.02.29.03.3.02.5.05.65.41.17.34.23.73.34 1.13.08.31.05.62-.03.93-.15.48-.31.67-.49.86-.22.23-.46.48-.65.65-.21.19-.4.38-.17.71.25.35.58.74.98 1.15.55.54 1.12 1.01 1.78 1.37.19.11.36.17.5.08.2-.12.42-.48.62-.75.22-.29.43-.55.7-.55.22-.01.46.04.68.16zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c5.52 0 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>
    </a>
    <button id="copy-link-button" class="p-2 rounded-full bg-foreground/10 hover:bg-foreground/20 text-foreground transition-colors" aria-label="Salin link">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8v-2z"></path></svg>
    </button>
  </div>
</div>

<script is:inline>
  const copyButton = document.getElementById('copy-link-button');
  if (copyButton) {
    copyButton.addEventListener('click', () => {
      navigator.clipboard.writeText(window.location.href).then(() => {
        // Beri feedback visual bahwa link sudah disalin
        copyButton.innerHTML = `
          <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 24 24"><path d="M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7z"></path></svg>
        `;
        setTimeout(() => {
          // Kembalikan ke ikon semula setelah 2 detik
          copyButton.innerHTML = `
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8v-2z"></path></svg>
          `;
        }, 2000);
      });
    });
  }
</script>